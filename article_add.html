<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>主页 -MuxAdmin</title>
    <link rel="stylesheet" href="static/common/mdui/css/mdui.css">
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/common/layui/css/layui.css">
    <script src="static/common/mdui/js/mdui.js"></script>


</head>
<body class="mdui-drawer-body-left">

<div class="mdui-container-fluid">

    <!-- 左侧菜单 开始 -->
    <div class="mdui-drawer" id="drawer">
        <h1 class="logo">MuxAdmin</h1>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons">home</i>
                <div class="mdui-list-item-content"><a href="/">Home</a></div>
            </li>
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">people</i>
                    <div class="mdui-list-item-content">用户管理</div>
                    <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
                </div>
                <ul class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    <a href="user_list.html">
                        <li class="mdui-list-item mdui-ripple">用户列表</li>
                    </a>
                    <a href="user_add.html">
                        <li class="mdui-list-item mdui-ripple">添加用户</li>
                    </a>
                </ul>
            </li>
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">&#xe335;</i>
                    <div class="mdui-list-item-content">分类管理</div>
                    <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
                </div>
                <ul class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    <a href="cate_list.html">
                        <li class="mdui-list-item mdui-ripple">分类列表</li>
                    </a>
                    <a href="cate_add.html">
                        <li class="mdui-list-item mdui-ripple">添加分类</li>
                    </a>
                </ul>
            </li>
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">&#xe02f;</i>

                    <div class="mdui-list-item-content">文章管理</div>
                    <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
                </div>
                <ul class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    <a href="article_list.html">
                        <li class="mdui-list-item mdui-ripple">文章列表</li>
                    </a>
                    <a href="article_add.html">
                        <li class="mdui-list-item mdui-ripple">添加文章</li>
                    </a>
                </ul>
            </li>
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">&#xe8b8;</i>

                    <div class="mdui-list-item-content">系统设置</div>
                    <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
                </div>
                <ul class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    <a href="web_set.html.html">
                        <li class="mdui-list-item mdui-ripple">网站设置</li>
                    </a>
                    <a href="web_about.html.html">
                        <li class="mdui-list-item mdui-ripple">关于信息</li>
                    </a>
                </ul>
            </li>
        </ul>
    </div>
    <!-- 左侧菜单 结束-->

    <div class="mdui-container-fluid">
        <!-- 右侧头部 开始 -->
        <div class="right-header">
            <div class="mdui-toolbar mdui-color-theme">
                <button id="toggle" class="mdui-ripple mdui-btn mdui-btn-icon mdui-m-a-1"><i
                        class="mdui-icon material-icons">menu</i>
                </button>
                <div class="mdui-toolbar-spacer"></div>
                <a href="javascript:location.reload();" class="mdui-btn mdui-btn-icon"><i
                        class="mdui-icon material-icons">refresh</i></a>

                <a href="javascript:location.href='/login.html'" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">&#xe879;</i></a>
            </div>
            <div class="mdui-divider"></div>
        </div>
        <!-- 右侧头部 结束 -->

        <!-- 左侧内容 开始 -->
        <div class="right-main">
            <div class="mdui-card border-1 mdui-shadow-0 mdui-m-b-2 ">
                <div class="mdui-card-primary">
                    <h3>添加分类</h3>
                </div>
                <div class="mdui-divider "></div>
                <div class="mdui-card-content">
                    <form class="layui-form " action="">
                        <div class="mdui-textfield">
                            <label class="mdui-textfield-label">预览</label>
                            <div>
                                <img class="pic_url" src="http://blog.im/static/common/image/pic.png" height="200px"/>
                            </div>
                        </div>


                        <div class="mdui-textfield">
                            <label class="mdui-textfield-label">缩略图</label>
                            <div class="layui-inline">
                                <input type="text" name="pic" id="pic_url" placeholder="不上传就留空" autocomplete="off"
                                       class="mdui-textfield-input">
                            </div>
                            <button type="button" class="mdui-btn border-1" id="pic">
                                <i class="layui-icon">&#xe67c;</i>上传图片
                            </button>

                        </div>

                        <div class="mdui-textfield">
                            <label class="mdui-textfield-label">标题</label>
                            <input type="text" name="title" placeholder="" autocomplete="off"
                                   class="mdui-textfield-input">
                        </div>

                        <div class="">
                            <label class="mdui-textfield-label">分类</label>
                            <select class="" name="type" id="select">
                                <option value="9">前端</option>
                                <option value="13">后端</option>
                                <option value="19">数据库</option>
                            </select>
                        </div>
                        <div class="mdui-textfield">
                            <label class="mdui-textfield-label">内容</label>
                            <textarea class="mdui-textfield-input" rows="4" placeholder="请输入文章内容"></textarea>
                        </div>

                        <div class="mdui-textfield">
                            <label class="mdui-textfield-label">关键词</label>
                            <input type="text" name="key" placeholder="用英文豆号隔开" autocomplete="off"
                                   class="mdui-textfield-input">
                        </div>
                        <div class="mdui-textfield">
                            <label class="mdui-textfield-label">是否置顶</label>
                            <input type="checkbox" value="1" name="top" lay-text="开启|关闭" lay-skin="switch">
                        </div>
                        <div class="mdui-textfield">
                            <label class="mdui-textfield-label">是否显示</label>
                            <input type="checkbox" value="1" name="state" lay-text="开启|关闭" checked
                                   lay-skin="switch">
                        </div>
                        <div class="mdui-textfield">
                            <button class="mdui-btn border-1" lay-submit lay-filter="submit">立即提交</button>

                        </div>
                    </form>

                </div>

            </div>
        </div>
        <!-- 左侧内容 结束 -->

        <!-- 左侧底部 开始 -->
        <div class="mdui-col-xs-12">
            <div class="bottom">
                Copyright © 2020.Company MuxAdmin All rights reserved.
            </div>
        </div>
        <!-- 左侧底部 结束 -->
    </div>


</div>

<script src="static/common/layui/layui.js"></script>
<script src="static/common/jquery.min.js"></script>
<script src="static/common/fixedScroll.js"></script>

<script>
    // var inst = new mdui.Select('#select');
    layui.use(['form', 'upload'], function () {
        var form = layui.form,
            layer = layui.layer,
            upload = layui.upload;

        upload.render({
            elem: '#pic' //绑定元素
            , url: "/admin/upload" //上传接口
            , done: function (res) {
                //上传完毕回调
                if (res.code == 1) {
                    $("#pic_url").val(res.url);
                    $(".pic_url").attr("src", res.url);
                } else {
                    layer.msg(res.info, function () {
                    })
                }
            }, error: function () {
                layer.msg("上传异常");
            }
        });

        form.on('submit(submit)', function (data) {
            layer.load({time: 0});
            $.post('/admin/article', data.field, function (res) {
                layer.closeAll('loading');
                if (res.code === 1) {
                    layer.msg(res.msg, {icon: 1, shade: 0.5,}, () => {
                        location.href = res.url
                    });
                } else {
                    layer.msg(res.msg, {icon: 2, shade: 0.5, time: 2000, shadeClose: true});
                }
            })
            return false;
        });
    });
</script>

<script>
    // 左侧状态栏的关闭和打开
    let inst = new mdui.Drawer('#drawer');
    // $('.right-header').fixedScroll()
    $('#toggle').click(() => {
        inst.toggle();
    })

    layui.use('form', () => {
        let form = layui.form,
            layer = layui.layer

        form.on('submit(submit)', data => {
            layer.msg('提交成功！', {icon: 6, time: 1500, anim: 2}, () => {
                console.log(data.field)
                // location.href = 'index.html'
            })
            return false;
        })
    })
</script>
</body>
</html>
